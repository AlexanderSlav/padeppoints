# ðŸ—ï¸ Tornetic System Architecture

This document describes the system architecture of Tornetic, a padel tournament management platform, using the C4 model approach.

## ðŸ“‹ Table of Contents

- [System Context](#system-context)
- [Container Architecture](#container-architecture)
- [Current Deployment](#current-deployment)
- [Future Architecture (with iOS App)](#future-architecture-with-ios-app)
- [Technology Stack](#technology-stack)
- [Data Flow](#data-flow)

---

## ðŸŒ System Context

### What is Tornetic?

Tornetic is a cloud-based tournament management system for padel (paddle tennis) that enables:
- Tournament organizers to create and manage tournaments
- Players to register, view schedules, and track scores
- Real-time leaderboards and statistics
- Support for multiple tournament formats (Americano, Mexicano planned)

### Users & External Systems

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TORNETIC SYSTEM                              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚              Tournament Management Platform                  â”‚  â”‚
â”‚  â”‚        (Web App + API + Database + Rating System)           â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                â–²                    â–²
         â”‚                â”‚                    â”‚
         â”‚                â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Tournamentâ”‚      â”‚ Player â”‚          â”‚  Google  â”‚
    â”‚Organizer â”‚      â”‚        â”‚          â”‚  OAuth   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Creates &         Registers &        Authentication
    manages          participates         provider
    tournaments      in matches
```

**Key Actors:**
- **Tournament Organizers**: Create tournaments, manage rounds, enter scores
- **Players**: Register for tournaments, view schedules, track performance
- **Google OAuth**: External authentication provider

---

## ðŸ“¦ Container Architecture

### High-Level Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER'S BROWSER                               â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  React Web Application                         â”‚ â”‚
â”‚  â”‚              (SPA - Single Page Application)                   â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â€¢ Tournament browsing      â€¢ Player registration             â”‚ â”‚
â”‚  â”‚  â€¢ Live leaderboards        â€¢ Score entry                     â”‚ â”‚
â”‚  â”‚  â€¢ Profile management       â€¢ Statistics                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTPS / JSON
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HETZNER VPS SERVER                              â”‚
â”‚                       (128.140.4.76)                                 â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚     nginx      â”‚  Reverse proxy, SSL termination, CORS           â”‚
â”‚  â”‚  (Port 80/443) â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚          â”‚                                                           â”‚
â”‚          â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              FastAPI Application (Docker)                  â”‚    â”‚
â”‚  â”‚                    (Port 8000)                             â”‚    â”‚
â”‚  â”‚                                                            â”‚    â”‚
â”‚  â”‚  API Layer:                                                â”‚    â”‚
â”‚  â”‚  â€¢ /api/v1/tournaments  â€¢ /api/v1/auth                    â”‚    â”‚
â”‚  â”‚  â€¢ /api/v1/users        â€¢ /api/v1/players                 â”‚    â”‚
â”‚  â”‚                                                            â”‚    â”‚
â”‚  â”‚  Business Logic:                                           â”‚    â”‚
â”‚  â”‚  â€¢ TournamentService    â€¢ AmericanoTournamentService      â”‚    â”‚
â”‚  â”‚  â€¢ RatingService        â€¢ AuthService (fastapi-users)     â”‚    â”‚
â”‚  â”‚                                                            â”‚    â”‚
â”‚  â”‚  Data Access:                                              â”‚    â”‚
â”‚  â”‚  â€¢ SQLAlchemy ORM       â€¢ Repository Pattern              â”‚    â”‚
â”‚  â”‚  â€¢ Alembic Migrations   â€¢ Async PostgreSQL Driver         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ PostgreSQL Protocol (SSL)
                              â”‚ Port 25060
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DIGITAL OCEAN MANAGED DATABASE                     â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              PostgreSQL 17 Database                        â”‚    â”‚
â”‚  â”‚                                                            â”‚    â”‚
â”‚  â”‚  Tables:                                                   â”‚    â”‚
â”‚  â”‚  â€¢ users               â€¢ tournaments                       â”‚    â”‚
â”‚  â”‚  â€¢ rounds              â€¢ tournament_player                 â”‚    â”‚
â”‚  â”‚  â€¢ player_ratings      â€¢ rating_history                   â”‚    â”‚
â”‚  â”‚  â€¢ tournament_results  â€¢ alembic_version                  â”‚    â”‚
â”‚  â”‚                                                            â”‚    â”‚
â”‚  â”‚  Features:                                                 â”‚    â”‚
â”‚  â”‚  â€¢ Automated backups   â€¢ SSL/TLS encryption               â”‚    â”‚
â”‚  â”‚  â€¢ Connection pooling  â€¢ Performance monitoring           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸš€ Current Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         INTERNET / DNS                                  â”‚
â”‚                                                                         â”‚
â”‚  tornetic.com (A â†’ Cloudflare)                                         â”‚
â”‚  api.tornetic.com (A â†’ 128.140.4.76)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                    â”‚
          â”‚                                    â”‚
          â–¼                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLOUDFLARE PAGES       â”‚        â”‚    HETZNER VPS (â‚¬4-10/mo)   â”‚
â”‚   (FREE)                 â”‚        â”‚    Ubuntu 24.04              â”‚
â”‚                          â”‚        â”‚    IP: 128.140.4.76          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚                              â”‚
â”‚  â”‚  React Frontend    â”‚  â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  (Static Build)    â”‚  â”‚        â”‚  â”‚    nginx + Certbot     â”‚  â”‚
â”‚  â”‚                    â”‚  â”‚        â”‚  â”‚   (SSL Termination)    â”‚  â”‚
â”‚  â”‚  â€¢ HTML/CSS/JS     â”‚  â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â€¢ Code Splitting  â”‚  â”‚        â”‚            â”‚                 â”‚
â”‚  â”‚  â€¢ Asset Caching   â”‚  â”‚        â”‚            â–¼                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                          â”‚        â”‚  â”‚   Docker Container     â”‚  â”‚
â”‚  Features:               â”‚        â”‚  â”‚                        â”‚  â”‚
â”‚  â€¢ Global CDN            â”‚        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â€¢ Auto SSL              â”‚        â”‚  â”‚  â”‚  FastAPI + Gunicorn  â”‚
â”‚  â€¢ GitHub Auto-deploy    â”‚        â”‚  â”‚  â”‚  (4 workers)     â”‚  â”‚  â”‚
â”‚  â€¢ Unlimited Bandwidth   â”‚        â”‚  â”‚  â”‚                  â”‚  â”‚  â”‚
â”‚  â€¢ HTTP/2 & HTTP/3       â”‚        â”‚  â”‚  â”‚  Port: 8000      â”‚  â”‚  â”‚
â”‚  â€¢ DDoS Protection       â”‚        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                    â”‚                              â”‚
         API Calls                  â”‚  Resources:                  â”‚
    (https://api.tornetic.com)      â”‚  â€¢ 2 vCPU                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â€¢ 4 GB RAM                  â”‚
                                    â”‚  â€¢ 40 GB SSD                 â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â”‚ PostgreSQL
                                                â”‚ SSL (Port 25060)
                                                â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  DIGITAL OCEAN MANAGED DB        â”‚
                              â”‚  ($15/mo)                        â”‚
                              â”‚                                  â”‚
                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                              â”‚  â”‚  PostgreSQL 17             â”‚  â”‚
                              â”‚  â”‚                            â”‚  â”‚
                              â”‚  â”‚  â€¢ 1 GB RAM                â”‚  â”‚
                              â”‚  â”‚  â€¢ 10 GB Storage           â”‚  â”‚
                              â”‚  â”‚  â€¢ Daily Backups           â”‚  â”‚
                              â”‚  â”‚  â€¢ SSL Required            â”‚  â”‚
                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EXTERNAL SERVICES                                                      â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  Google OAuth   â”‚              â”‚  Let's Encrypt   â”‚                 â”‚
â”‚  â”‚                 â”‚              â”‚                  â”‚                 â”‚
â”‚  â”‚  Authentication â”‚              â”‚  SSL Certificatesâ”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TOTAL MONTHLY COST: ~â‚¬20-25 (~$22-27)
```

### Deployment Details

**Frontend (Cloudflare Pages):**
- Build: `cd padel-frontend && npm install && npm run build`
- Output: `padel-frontend/build`
- Auto-deploys from GitHub on push to `main` branch
- Served via Cloudflare's global CDN (200+ locations)

**Backend (Hetzner VPS):**
- Docker Compose production setup
- Gunicorn with 4 Uvicorn workers
- Nginx reverse proxy with:
  - SSL/TLS (Let's Encrypt)
  - CORS headers
  - Security headers (HSTS, CSP, etc.)
  - Rate limiting via FastAPI middleware

**Database (Digital Ocean):**
- Managed PostgreSQL 17
- Automated daily backups (7-day retention)
- SSL-only connections
- Connection pooling enabled

---

## ðŸ“± Future Architecture (with iOS App)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            CLIENTS                                      â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Web Browser    â”‚    â”‚   iOS App        â”‚    â”‚  Android App    â”‚   â”‚
â”‚  â”‚                  â”‚    â”‚                  â”‚    â”‚  (Future)       â”‚   â”‚
â”‚  â”‚  React SPA       â”‚    â”‚  Swift/SwiftUI   â”‚    â”‚                 â”‚   â”‚
â”‚  â”‚  (Cloudflare)    â”‚    â”‚  Native iOS      â”‚    â”‚  Kotlin/Jetpack â”‚   â”‚
â”‚  â”‚                  â”‚    â”‚                  â”‚    â”‚                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                        â”‚                        â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                        â”‚                        â”‚
          â”‚                        â”‚                        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                         HTTPS / JSON REST API
                         (api.tornetic.com)
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY / LOAD BALANCER                        â”‚
â”‚                         (Future Enhancement)                            â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Nginx or Cloud Load Balancer                                  â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â€¢ SSL Termination              â€¢ Rate Limiting                â”‚    â”‚
â”‚  â”‚  â€¢ Request Routing              â€¢ API Versioning               â”‚    â”‚
â”‚  â”‚  â€¢ Health Checks                â€¢ DDoS Protection              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚              â”‚
                    â–¼              â–¼              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  API Server 1  â”‚ â”‚  API Server 2  â”‚ â”‚  API Server 3  â”‚
         â”‚  (FastAPI)     â”‚ â”‚  (FastAPI)     â”‚ â”‚  (FastAPI)     â”‚
         â”‚                â”‚ â”‚                â”‚ â”‚                â”‚
         â”‚  â€¢ Auth        â”‚ â”‚  â€¢ Tournaments â”‚ â”‚  â€¢ Ratings     â”‚
         â”‚  â€¢ Users       â”‚ â”‚  â€¢ Rounds      â”‚ â”‚  â€¢ Stats       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   PostgreSQL Database Cluster   â”‚
                  â”‚                                 â”‚
                  â”‚  Primary + Read Replicas        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                         â”‚                         â”‚
         â–¼                         â–¼                         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Redis      â”‚        â”‚   S3 / CDN   â”‚        â”‚  Push Notif  â”‚
  â”‚   Cache      â”‚        â”‚   Storage    â”‚        â”‚   Service    â”‚
  â”‚              â”‚        â”‚              â”‚        â”‚              â”‚
  â”‚  â€¢ Sessions  â”‚        â”‚  â€¢ Images    â”‚        â”‚  â€¢ APNs (iOS)â”‚
  â”‚  â€¢ Rankings  â”‚        â”‚  â€¢ Avatars   â”‚        â”‚  â€¢ FCM (And.)â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ANALYTICS & MONITORING                                                 â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Prometheus  â”‚  â”‚   Grafana    â”‚  â”‚  Error Track â”‚                  â”‚
â”‚  â”‚   Metrics    â”‚  â”‚  Dashboards  â”‚  â”‚  (Sentry)    â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### iOS App Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    iOS APPLICATION                              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    PRESENTATION LAYER                     â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  SwiftUI Views:                                           â”‚  â”‚
â”‚  â”‚  â€¢ TournamentListView      â€¢ TournamentDetailView        â”‚  â”‚
â”‚  â”‚  â€¢ LeaderboardView         â€¢ ProfileView                 â”‚  â”‚
â”‚  â”‚  â€¢ MatchResultsView        â€¢ RegistrationView            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    VIEW MODELS (MVVM)                     â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ TournamentViewModel     â€¢ AuthViewModel               â”‚  â”‚
â”‚  â”‚  â€¢ LeaderboardViewModel    â€¢ ProfileViewModel            â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  State Management: Combine / @Published                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    SERVICE LAYER                          â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ APIService (URLSession)                                â”‚  â”‚
â”‚  â”‚  â€¢ AuthenticationService                                  â”‚  â”‚
â”‚  â”‚  â€¢ LocalStorageService (CoreData / UserDefaults)          â”‚  â”‚
â”‚  â”‚  â€¢ NotificationService                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    DATA LAYER                             â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ Network Models (Codable)                               â”‚  â”‚
â”‚  â”‚  â€¢ CoreData Models (Local Cache)                          â”‚  â”‚
â”‚  â”‚  â€¢ Keychain (Secure Token Storage)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTPS
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Backend API     â”‚
                  â”‚  (FastAPI)       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### iOS Features Roadmap

**Phase 1 (MVP):**
- âœ… User authentication (OAuth + Email/Password)
- âœ… Browse tournaments
- âœ… Register for tournaments
- âœ… View live leaderboards
- âœ… View match schedules

**Phase 2:**
- ðŸ“± Push notifications for match updates
- ðŸ“± Offline mode with local caching
- ðŸ“± QR code scanning for check-in
- ðŸ“± Camera integration for score entry

**Phase 3:**
- ðŸ“± Apple Watch companion app
- ðŸ“± HealthKit integration (track activity)
- ðŸ“± Social features (player connections)
- ðŸ“± In-app payments (tournament fees)

---

## ðŸ› ï¸ Technology Stack

### Frontend

| Layer | Technology | Purpose |
|-------|-----------|---------|
| **Framework** | React 18 | UI framework |
| **Routing** | React Router v6 | Client-side routing |
| **HTTP Client** | Axios | API communication |
| **Charts** | Recharts | Data visualization |
| **Styling** | CSS Modules | Component styling |
| **Build Tool** | Create React App | Bundling & optimization |
| **Hosting** | Cloudflare Pages | CDN & static hosting |

### Backend

| Layer | Technology | Purpose |
|-------|-----------|---------|
| **Framework** | FastAPI 0.115.8 | REST API framework |
| **Language** | Python 3.11 | Core language |
| **Server** | Gunicorn + Uvicorn | ASGI server (production) |
| **ORM** | SQLAlchemy 2.0 (async) | Database abstraction |
| **Migrations** | Alembic 1.14.1 | Schema versioning |
| **Auth** | fastapi-users 14.0.1 | Authentication system |
| **OAuth** | httpx-oauth 0.16.1 | Google OAuth integration |
| **Validation** | Pydantic 2.10.6 | Data validation |
| **Rate Limiting** | SlowAPI 0.1.9 | API rate limiting |
| **Logging** | Loguru 0.7.3 | Structured logging |

### Database

| Component | Technology | Purpose |
|-----------|-----------|---------|
| **DBMS** | PostgreSQL 17 | Primary database |
| **Driver** | asyncpg 0.30.0 | Async PostgreSQL driver |
| **Connection Pool** | SQLAlchemy pool | Connection management |
| **Backup** | Digital Ocean automated | Daily backups (7-day retention) |

### Infrastructure

| Component | Technology | Purpose |
|-----------|-----------|---------|
| **Containerization** | Docker + Docker Compose | Application packaging |
| **Reverse Proxy** | Nginx | Load balancing, SSL |
| **SSL/TLS** | Let's Encrypt (Certbot) | Free SSL certificates |
| **VPS** | Hetzner Cloud | Backend hosting |
| **CDN** | Cloudflare | Frontend delivery |
| **Managed DB** | Digital Ocean | Database hosting |

### iOS (Planned)

| Layer | Technology | Purpose |
|-------|-----------|---------|
| **Language** | Swift 5.9+ | Native iOS development |
| **UI Framework** | SwiftUI | Declarative UI |
| **Architecture** | MVVM | Design pattern |
| **Networking** | URLSession + Combine | HTTP client |
| **Local Storage** | CoreData | Offline caching |
| **Secure Storage** | Keychain | Token storage |
| **Push Notifications** | APNs | Real-time updates |

---

## ðŸ”„ Data Flow

### User Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client â”‚                â”‚    API   â”‚                â”‚   DB    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                          â”‚                           â”‚
     â”‚ POST /auth/jwt/login     â”‚                           â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
     â”‚ (email, password)        â”‚                           â”‚
     â”‚                          â”‚ Verify credentials        â”‚
     â”‚                          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                          â”‚                           â”‚
     â”‚                          â”‚ User data                 â”‚
     â”‚                          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                          â”‚                           â”‚
     â”‚                          â”‚ Generate JWT              â”‚
     â”‚                          â”‚                           â”‚
     â”‚ JWT token + user data    â”‚                           â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
     â”‚                          â”‚                           â”‚
     â”‚ Store token (localStorage)                           â”‚
     â”‚                          â”‚                           â”‚
     â”‚ GET /users/me            â”‚                           â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
     â”‚ Authorization: Bearer... â”‚                           â”‚
     â”‚                          â”‚ Validate JWT              â”‚
     â”‚                          â”‚                           â”‚
     â”‚                          â”‚ Fetch user                â”‚
     â”‚                          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                          â”‚                           â”‚
     â”‚ User profile data        â”‚                           â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
```

### Tournament Creation & Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”
â”‚Organizer â”‚         â”‚    API   â”‚         â”‚  Tournament      â”‚         â”‚ DB  â”‚
â”‚          â”‚         â”‚          â”‚         â”‚  Service         â”‚         â”‚     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”¬â”€â”€â”˜
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚ POST /tournaments  â”‚                     â”‚                          â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                          â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚ Create tournament   â”‚                          â”‚
     â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚                     â”‚ Save tournament          â”‚
     â”‚                    â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚                     â”‚ Tournament created       â”‚
     â”‚                    â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚ Tournament data     â”‚                          â”‚
     â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚ Tournament ID      â”‚                     â”‚                          â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                          â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚ POST /tournaments/{id}/start              â”‚                          â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                          â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚ Generate rounds     â”‚                          â”‚
     â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚                     â”‚ Calculate pairings       â”‚
     â”‚                    â”‚                     â”‚ (Americano algorithm)    â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚                     â”‚ Save rounds              â”‚
     â”‚                    â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚                     â”‚ Rounds saved             â”‚
     â”‚                    â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚                    â”‚ Rounds data         â”‚                          â”‚
     â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
     â”‚                    â”‚                     â”‚                          â”‚
     â”‚ Match schedule     â”‚                     â”‚                          â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                          â”‚
```

### Rating System Update Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”
â”‚Organizer â”‚    â”‚   API    â”‚    â”‚  Tournament  â”‚    â”‚  Rating  â”‚    â”‚ DB  â”‚
â”‚          â”‚    â”‚          â”‚    â”‚  Service     â”‚    â”‚  Service â”‚    â”‚     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”¬â”€â”€â”˜
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚ PATCH /rounds/{id}/score         â”‚                 â”‚             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚ Update score     â”‚                 â”‚             â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚ Save score      â”‚             â”‚
     â”‚               â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚ Calculate       â”‚             â”‚
     â”‚               â”‚                  â”‚ player scores   â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚ Update ratings  â”‚             â”‚
     â”‚               â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚ Get current â”‚
     â”‚               â”‚                  â”‚                 â”‚ ratings     â”‚
     â”‚               â”‚                  â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚ Calculate   â”‚
     â”‚               â”‚                  â”‚                 â”‚ new ratings â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚ Save new    â”‚
     â”‚               â”‚                  â”‚                 â”‚ ratings +   â”‚
     â”‚               â”‚                  â”‚                 â”‚ history     â”‚
     â”‚               â”‚                  â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚ Ratings updated â”‚             â”‚
     â”‚               â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚               â”‚ Score & rankings â”‚                 â”‚             â”‚
     â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚             â”‚
     â”‚               â”‚                  â”‚                 â”‚             â”‚
     â”‚ Updated data  â”‚                  â”‚                 â”‚             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                 â”‚             â”‚
```

---

## ðŸ” Security Measures

### Current Implementation

- âœ… SSL/TLS encryption (Let's Encrypt)
- âœ… HTTPS-only for all communications
- âœ… JWT-based authentication with secure token storage
- âœ… Password hashing (bcrypt via passlib)
- âœ… CORS configuration for allowed origins
- âœ… Rate limiting on API endpoints
- âœ… SQL injection prevention (SQLAlchemy ORM)
- âœ… Security headers (HSTS, CSP, X-Frame-Options)
- âœ… Database SSL mode required
- âœ… Environment variables for secrets (never committed)

### Planned Enhancements

- ðŸ”„ API key rotation
- ðŸ”„ Request signing for mobile apps
- ðŸ”„ OAuth token refresh mechanism
- ðŸ”„ 2FA (Two-Factor Authentication)
- ðŸ”„ IP-based rate limiting
- ðŸ”„ DDoS protection (Cloudflare)
- ðŸ”„ Automated security scanning (Dependabot)

---

## ðŸ“ˆ Scalability Considerations

### Current Limitations

- Single VPS server (vertical scaling only)
- Single database instance
- No caching layer
- No load balancing

### Future Scaling Strategy

1. **Horizontal Scaling**:
   - Multiple API server instances behind load balancer
   - Database read replicas for queries
   - Redis cache for frequently accessed data

2. **Performance Optimization**:
   - CDN for static assets (already implemented)
   - Database query optimization
   - API response caching
   - Connection pooling

3. **Infrastructure**:
   - Kubernetes for container orchestration
   - Auto-scaling based on load
   - Multi-region deployment
   - Managed Kubernetes (DigitalOcean, AWS EKS)

4. **Monitoring & Observability**:
   - Prometheus metrics collection
   - Grafana dashboards
   - Error tracking (Sentry)
   - Performance monitoring (New Relic / DataDog)

---

## ðŸ“Š Cost Analysis

### Current Monthly Costs

| Service | Cost | Notes |
|---------|------|-------|
| Cloudflare Pages | **FREE** | Unlimited bandwidth, auto SSL |
| Hetzner VPS | **â‚¬4-10** | 2 vCPU, 4 GB RAM, 40 GB SSD |
| Digital Ocean DB | **$15** | Managed PostgreSQL, automated backups |
| Domain (GoDaddy) | **~$1.25** | $15/year amortized |
| **TOTAL** | **~â‚¬20-25/mo** | **~$22-27/month** |

### Projected Costs with iOS App

| Service | Current | With iOS |
|---------|---------|----------|
| Cloudflare Pages | FREE | FREE |
| Hetzner VPS | â‚¬10/mo | â‚¬20/mo (upgraded) |
| Digital Ocean DB | $15/mo | $25/mo (upgraded) |
| Redis Cache | - | $10/mo |
| Push Notifications | - | FREE (APNs) |
| Apple Developer | - | $99/year (~$8.25/mo) |
| **TOTAL** | **~â‚¬25/mo** | **~â‚¬55-60/mo** |

---

## ðŸš¦ System Status & Monitoring

### Health Checks

- `GET /health` - API health status
- `GET /` - Root endpoint (API running check)
- Database connection monitoring
- SSL certificate expiry monitoring (auto-renewal)

### Uptime Targets

- **API**: 99.5% uptime SLA
- **Database**: 99.9% uptime (managed service SLA)
- **Frontend**: 99.99% uptime (Cloudflare CDN)

---

## ðŸ“š Related Documentation

- [Deployment Guide](DEPLOYMENT.md) - Step-by-step deployment instructions
- [Quick Reference](QUICK_REFERENCE.md) - Common commands and troubleshooting
- [Authentication System](docs/auth_system_design.md) - Auth architecture details
- [Development Guide](CLAUDE.md) - Local development setup

---

**Last Updated**: October 2, 2025
**Version**: 1.0.0
**Maintained by**: Tornetic Development Team
